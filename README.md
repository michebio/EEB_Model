# Elephant Energy Budget Model and Analysis
                                                                       
Author: Vicky Boult                                                   
Date: 25th September 2018                                                   
For more info: vlboult93@hotmail.com                       

# Files relating to: 

  Boult, V.L., Quaife, T., Fishlock, V., Moss, C.J., Lee, P.C. & Sibly, R.M, 2018. 
  Individual-based modelling of elephant population dynamics using remote sensing to estimate food availability. 
  Ecological Modelling, 387, pp. 187-195. 
  https://doi.org/10.1016/j.ecolmodel.2018.09.010


# File Directory

 FOLDER: EEB_Manuscript

    Accepted Version - accepted version of manuscript Boult et al 2018 Ecol Mod 
    EEB_TRACE.doc    - Details model development, testing, calibration and validation

 FOLDER: EEB_Model (*called by EEB_240418.nlogo) 

    EEB_240418.nlogo  - Elephant energy budget individual-based model in NetLogo 
    *XX_setup.txt     - Starting population for each modelled family (IB, LB, VA and WA). Columns are: individual name, mother's name,
                        age in years, age in days since last birthday, sex, pregnancy status (T/F), days since conception, 
                        lactation status (T/F), days since parturition of lactating calf
    *NDVI_ILVW_HR.csv - Time-series of median NDVI value for modelled area (across combined home ranges of modelled families)
    *asc_nos.csv      - List of ticks on which NDVI value updated

 FOLDER: EEB_Validation (*called by EEB_240418_validation.nlogo) 

    EEB_240418_validation.nlogo  - Validation version of EEB_240418.nlogo adjusted for resident families
    *RES_setup.txt               - Starting population of resident elephant families. Columns are individual variables as of 1st March 2000: name, mother's name,
                                   family, sex, age in years, age in days since last birthday, pregnancy status (T/F), days since conception, 
                                   lactation status (T/F), days since parturition of lactating calf 
    *NDVI_RES.csv                - Time-series of median NDVI value for modelled area (across combined home ranges of resident families)
    *asc_nos.csv                 - List of ticks on which NDVI value updated

 FOLDER: EEB_Analysis > ABC (*called by EEB_ABC.R) 
 
    EEB_ABC.R                   - Script to run approximate Bayesian computation to calibrate model parameters
    *ABC_simulation.R           - Simulation function to run EEB_240418.nlogo with prior parameters (returns model output annually)
    *ABC_parameter_estimation.R - Function to accept posterior parameter distributions
    *ABC_plotting.R             - Creates plots of data, best fitting simulation and accepted results for population dynamic data
    *EEB_ILVW_data.txt          - Empirical population data for modelled families

 FOLDER: EEB_Analysis > Sensitivity (*called by EEB_SA.R) 

    EEB_SA.R         - Script to run local sensitivity analysis 
    *SA_simulation   - Simulation function to run EEB_240418.nlogo (returns model output once at end of model period)
    *best1priors.csv - Best fitting parameter set generated by EEB_ABC.R

 FOLDER: EEB_Analysis > Validation (*called by EEB_validation.R)

    EEB_validation       - Script to run model validation (EEB_240418_validation.nlogo)
    *Validation_plot     - Creates plots of population data and 30 simulations
    *best30priors        - 30 accepted parameter sets generated by EEB_ABC.R
    *EEB_validation_data - Empirical population data for resident families

 FOLDER: EEB_Analysis > Scenarios (*called by EEB_scenarios.R)

    EEB_scenarios.R             - Script to run hypothetical range reduction scenarios through EEB_240418.nlogo
    *EEB_simulation_scenarios.R - Simulattion function to run EEB_240418.nlogo with reduced range
    *EEB_ILVW_data.txt          - Empirical population data for modelled families
    *best30priors.csv           - 30 accepted parameter sets generated by EEB_ABC.R

 FOLDER: EEB_Analysis > Results

    ABC_priors.txt         - prior parameter sets for ABC (100,000 sets of 11 parameters)
    ABC_results.txt        - population dynamic model results (100,000 sets of 68 data points)
    best1priors.csv        - parameter set producing output best fitting population data (1 set of 11 parameters)
    best30priors.csv       - accepted parameter sets (30 closest)
    best1res.csv           - best fitting model output (1 set of 68 data points)
    best30res.csv          - accepted model output (30 closest)
    SA_runs.csv            - population data output during sensitivity simulations
    SA_table.csv           - table of sensitivites and SE
    scenario50_results.txt - population size with 50% range reduction (30 simulations)
    scenario90_results.txt - population size with 10% range reduction (30 simulations)
    validation_results.txt - population data output for model validation (30 simulations)


# Instructions
 
 TO RUN NETLOGO MODEL (EEB_240418.nlogo):

 - Must have NetLogo installed (available: https://ccl.northwestern.edu/netlogo/download.shtml)
 - Assuming .nlogo file and associated files in same folder, simply press setup and go
 - All plots are enabled, but can be turned-off to speed up model (right click on plot > Edit and put ';' in front of 'Pen update commands'
 - Underlying code can be seen by clicking 'Code' tab in top-left

